$(document).ready(function(){jQuery(function(e){e("input.contact-form__input").mask("+7 (999) 999-99-99",{placeholder:"+7 (___) ___-__-__"});e("input.modal-input").mask("+7 (999) 999-99-99",{placeholder:"+7 (___) ___-__-__"})});$(".content__sent button.close").on("click",function(g){g.preventDefault();var f=$(this).closest(".modal");$(f).find(".content").css({display:"block",transition:"display .5s"});$(f).find(".content__sent").css({display:"none",transition:"display 1s"});return true});$(".fail button.close").on("click",function(g){g.preventDefault();var f=$(this).closest(".modal");$(f).find(".content").css({display:"block",transition:"display .5s"});$(f).find(".fail").css({display:"none",transition:"display 1s"});return true});$(".content button.close").on("click",function(g){g.preventDefault();var f=$(this).closest(".modal");$(f).find("label.user_phone").css({color:"#ffffff"});return true});$("input[name='user_phone']").keydown(function(){var f=$(this).closest(".modal");$(f).find("label.user_phone").css({color:"#ffffff"});var e=$(this).closest("form");$(e).find("label.user_phone").css({color:"transparent"})});$("input[name='user_email']").keydown(function(){var e=$(this).closest("form");$(e).find("label.user_email").css({color:"transparent"})});function d(e,h,g,f){if(e=="success"){console.log("Данные отправлены \n"+h,e);$(g).find(".content").css({display:"none",transition:"display .5s"});$(g).find(".content__sent").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset()}else{if(e=="bad_type"){console.log("Плохой тип файла \n"+h,e);$(g).find(".content").css({display:"none",transition:"display .5s"});$(g).find(".fail").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset()}else{if(e=="bad_size"){console.log("Большой размер файла \n"+h,e);$(g).find(".content").css({display:"none",transition:"display .5s"});$(g).find(".fail .modal-title").text("Превышен размер файла");$(g).find(".fail .modal-subtitle").text("Пожалуйста, выберите документ меньше 20 мегабайт");$(g).find(".fail").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset()}else{console.log("Не удалось отправить форму. \n"+h,e);$(g).find(".fail .modal-title").text("Не удалось отправить форму.");$(g).find(".fail .modal-subtitle").text("Попробуйте позже");$(g).find(".content").css({display:"none",transition:"display .5s"});$(g).find(".fail").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset()}}}}function c(g,f,e){$(g).fadeTo("fast",0.15,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:"php/send.php",type:"POST",data:$(g).serialize()+e,success:function(h){var j=h.message;var i=h.type;d(i,j,f,g);$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})},error:function(h){d("error",h.message,f,g)}})}function b(g,f,h){var i=$(".inputfile").prop("files")[0];var j=new FormData();j.append("file",i);if(a(g,"user_phone")){var e=$(g).find("input").val();j.append("options","three");j.append("user_phone",e);if(h){j.append("whatsapp","call")}$(g).fadeTo("fast",0.15,function(){console.log("freezed");$(this).find(".button").prop("disabled",true)});$.ajax({url:"php/upload.php",cache:false,contentType:false,processData:false,data:j,type:"post",success:function(k){var m=k.message;var l=k.type;d(l,m,f,g);$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})},error:function(k){console.log("Ошибка. Данные не отправлены."+k.responseText);d("error",messageText,f,g);$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}})}else{$(g).find("label.user_phone").css({color:"red",transition:"color .3s"})}}function a(f,e){var h="input[name="+e+"]";var g=f.find(h).val();return g}$(".optionsModal__call").on("click",function(h){h.preventDefault();var g=$(this).closest("form");var f=$(this).closest("#optionsModal");if(a(g,"user_phone")){var i="&options=three";c(g,f,i)}else{$(g).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".optionsModal__whatsapp").on("click",function(h){h.preventDefault();var g=$(this).closest("form");var f=$(this).closest("#optionsModal");if(a(g,"user_phone")){var i="&whatsapp=call&options=three";c(g,f,i)}else{$(g).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".mainModal__call").on("click",function(h){h.preventDefault();var g=$(this).closest("form");var f=$(this).closest("#mainModal");var i="";if(a(g,"user_phone")){c(g,f,i)}else{$(g).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".mainModal__whatsap").on("click",function(i){i.preventDefault();var h=$(this).closest("form");var g=$(this).closest("#mainModal");if(a(h,"user_phone")){var f="&whatsapp=call";c(h,g,f)}else{$(h).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".tzModal__call").on("click",function(h){h.preventDefault();var g=$(this).closest("form");var f=$(this).closest("#tzModal");var i="&options=tz";if(a(g,"user_phone")){c(g,f,i)}else{$(g).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".tzModal__whatsap").on("click",function(i){i.preventDefault();var h=$(this).closest("form");var g=$(this).closest("#tzModal");if(a(h,"user_phone")){var f="&whatsapp=call&options=tz";c(h,g,f)}else{$(h).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".pricelist-form__call").on("click",function(j){j.preventDefault();var i=$(this).closest("form");var g="php/send.php";var f=i.find("input[name='user_email']").val();var h=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(f&&h.test(f)){var k="&options=price";$(i).fadeTo("fast",0.15,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:"php/send.php",type:"POST",data:$(i).serialize()+k,success:function(e){var l=e.type;var m=e.message;$(i).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)});if(l=="success"){console.log("Данные отправлены \n"+m,l);$(i).find("label.user_email").css({color:"transparent"});$(i)[0].reset();$("#successModal").modal("show");$(i).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}else{$("#successModal").find(".fail .modal-title").text("Возникла ошибка.");$("#successModal").find(".fail .modal-subtitle").text("Попробуйте позже");$("#successModal").find(".content").css({display:"none",transition:"display .5s"});$("#successModal").find(".fail").css({display:"block",transition:"display 1s"});$(i).find("label.user_email").css({color:"transparent"});$(i)[0].reset();$("#successModal").modal("show");$(i).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}},error:function(e){$(i).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)});console.log("Ошибка. Данные не отправлены."+e.responseText);$("#successModal").find(".fail .modal-title").text("Возникла ошибка.");$("#successModal").find(".fail .modal-subtitle").text("Попробуйте позже");$("#successModal").find(".content").css({display:"none",transition:"display .5s"});$("#successModal").find(".fail").css({display:"block",transition:"display 1s"});$(i).find("label.user_email").css({color:"transparent"});$(i)[0].reset();$("#successModal").modal("show")}})}else{$(i).find("label.user_email").css({color:"red",transition:"color .3s"})}return false});$(".contact-form__call").on("click",function(h){h.preventDefault();console.log("contact-form call");var g=$(this).closest("form");var f="php/send.php";if(a(g,"user_phone")){$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",true)});var i="&options=enginier";$.ajax({url:f,type:"POST",data:$(g).serialize()+i,success:function(e){var j=e.type;var k=e.message;if(j=="success"){$(g).find("label.user_phone").css({color:"transparent"});$(g)[0].reset();$("#successModal").modal("show")}else{$("#successModal").find(".fail .modal-title").text("Возникла ошибка.");$("#successModal").find(".fail .modal-subtitle").text("Попробуйте позже");$("#successModal").find(".success").css({display:"none",transition:"display .5s"});$("#successModal").find(".fail").css({display:"block",transition:"display 1s"});$(g).find("label.user_phone").css({color:"transparent"});$(g)[0].reset();$("#successModal").modal("show")}$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})},error:function(e){console.log("Ошибка. Данные не отправлены."+e.responseText);$("#successModal").find(".fail .modal-title").text("Возникла ошибка.");$("#successModal").find(".fail .modal-subtitle").text("Попробуйте позже");$("#successModal").find(".success").css({display:"none",transition:"display .5s"});$("#successModal").find(".fail").css({display:"block",transition:"display 1s"});$(g).find("label.user_phone").css({color:"transparent"});$(g)[0].reset();$("#successModal").modal("show");$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}})}else{$(g).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".contact-form__whatsapp").on("click",function(h){h.preventDefault();console.log("contact-form whatsapp call");var g=$(this).closest("form");var f="php/send.php";if(a(g,"user_phone")){var i="&whatsapp=enginier";$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:f,type:"POST",data:$(g).serialize()+i,success:function(e){var j=e.type;var k=e.message;if(j=="success"){console.log("Данные отправлены \n"+k,j);$(g).find("label.user_phone").css({color:"transparent"});$(g)[0].reset();$("#successModal").modal("show")}else{$("#successModal").find(".fail .modal-title").text("Возникла ошибка.");$("#successModal").find(".fail .modal-subtitle").text("Попробуйте позже");$("#successModal").find(".content").css({display:"none",transition:"display .5s"});$("#successModal").find(".fail").css({display:"block",transition:"display 1s"});$(g).find("label.user_phone").css({color:"transparent"});$(g)[0].reset();$("#successModal").modal("show")}$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})},error:function(e){console.log("Ошибка. Данные не отправлены."+e.responseText);$("#successModal").find(".fail .modal-title").text("Возникла ошибка.");$("#successModal").find(".fail .modal-subtitle").text("Попробуйте позже");$("#successModal").find(".content").css({display:"none",transition:"display .5s"});$("#successModal").find(".fail").css({display:"block",transition:"display 1s"});$(g).find("label.user_phone").css({color:"transparent"});$(g)[0].reset();$("#successModal").modal("show");$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}})}else{$(g).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".uploadModal__call").on("click",function(h){h.preventDefault();console.log("modal upload call");var g=$(this).closest("form");var f=$(this).closest("#uploadModal");b(g,f,whatsapp=true);return false});$(".uploadModal__whatsapp").on("click",function(h){h.preventDefault();console.log("modal upload call");var g=$(this).closest("form");var f=$(this).closest("#uploadModal");b(g,f,whatsapp=true);return false});$(".calcModal__call").on("click",function(k){k.preventDefault();console.log("modal calc");var f=$(this).closest("form");var m=$(this).closest("#calcModal");if(a(f,"user_phone")){var j=new FormData();var g=$(f).find("input").val();var n=$("#calc-form").find("input#input_square").val();var i=$("#calc-form").find("input#input_baget").val();var l=$("#calc-form").find("select#input_material").val();var h=$("#calc-form").find("input#input_time").val();var o="calc";console.log(n,i,l,h,o);j.append("user_phone",g);j.append("options",o);j.append("square",n);j.append("baget",i);j.append("material",l);j.append("time",h);$(f).fadeTo("fast",0.15,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:"php/send.php",cache:false,contentType:false,processData:false,data:j,type:"post",success:function(e){var q=e.message;var p=e.type;if(p=="success"){$(m).find(".content").css({display:"none",transition:"display .5s"});$(m).find(".content__sent").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset();$("#calc-form")[0].reset();$("#calc-form output.baget").val(30000);$("#calc-form output.square").val(0);$("#calc-form output").css("left","0")}else{$(m).find(".fail .modal-title").text("Не удалось отправить форму.");$(m).find(".fail .modal-subtitle").text("Попробуйте позже");$(m).find(".content").css({display:"none",transition:"display .5s"});$(m).find(".fail").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset()}$(f).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})},error:function(e){console.log("Ошибка. Данные не отправлены."+e.responseText);$(m).find(".fail .modal-title").text("Не удалось отправить форму.");$(m).find(".fail .modal-subtitle").text("Попробуйте позже");$(m).find(".content").css({display:"none",transition:"display .5s"});$(m).find(".fail").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset();$(f).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}})}else{$(f).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".calcModal__whatsapp").on("click",function(k){k.preventDefault();var f=$(this).closest("form");var m=$(this).closest("#calcModal");if(a(f,"user_phone")){var j=new FormData();var g=$(f).find("input").val();var n=$("#calc-form").find("input#input_square").val();var i=$("#calc-form").find("input#input_baget").val();var l=$("#calc-form").find("select#input_material").val();var h=$("#calc-form").find("input#input_time").val();var o="calc";console.log(n,i,l,h,o);j.append("user_phone",g);j.append("options",o);j.append("whatsapp","call");j.append("square",n);j.append("baget",i);j.append("material",l);j.append("time",h);$(f).fadeTo("fast",0.15,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:"php/send.php",cache:false,contentType:false,processData:false,data:j,type:"post",success:function(e){var q=e.message;var p=e.type;if(p=="success"){$(m).find(".content").css({display:"none",transition:"display .5s"});$(m).find(".content__sent").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset();$("#calc-form")[0].reset();$("#calc-form output.baget").val(30000);$("#calc-form output.square").val(0);$("#calc-form output").css("left","0")}else{$(m).find(".fail .modal-title").text("Не удалось отправить форму.");$(m).find(".fail .modal-subtitle").text("Попробуйте позже");$(m).find(".content").css({display:"none",transition:"display .5s"});$(m).find(".fail").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset()}$(f).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})},error:function(e){console.log("Ошибка. Данные не отправлены."+e.responseText);$(m).find(".fail .modal-title").text("Не удалось отправить форму.");$(m).find(".fail .modal-subtitle").text("Попробуйте позже");$(m).find(".content").css({display:"none",transition:"display .5s"});$(m).find(".fail").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset();$(f).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}})}else{$(f).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".floors-features .nav-link").click(function(){console.log("tab-click ");var e="";switch(this.id){case"floors-oil-tab":e="oil";break;case"floors-farm-tab":e="farm";break;case"floors-food-tab":e="food";break;case"floors-chemistry-tab":e="chemistry";break;case"floors-drugs-tab":e="drugs";break;case"floors-logs-tab":e="logs";break;default:e="oil"}$(".floors").css({"background-image":"url(images/floors/floors-"+e+".png)"});$(".tab-pane.fade").css({transition:"opacity .3s"})})});