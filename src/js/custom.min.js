$(document).ready(function(){jQuery(function(f){f("input.contact-form__input").mask("+7 (999) 999-99-99",{placeholder:"+7 (___) ___-__-__"});f("input.modal-input").mask("+7 (999) 999-99-99",{placeholder:"+7 (___) ___-__-__"})});function e(){var f=document.getElementById("file").files[0];var g="не определилось";if(!f){return 1}var i=f.name.split(".");if(i.length>1){g=i.pop()}var h;if(f.size>(10*1024*1024)){h=0}else{switch(f.type){case"application/pdf":h=1;break;case"application/msword":h=1;break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":h=1;break;case"application/rtf":h=1;break;case"text/richtext":h=1;break;case"application/x-rtf":h=1;break;case"image/jpeg":h=1;break;case"image/pjpeg":h=1;break;case"image/png":h=1;break;case"text/plain":h=1;break;default:h=0}}return h}$(".content__sent button.close").on("click",function(g){g.preventDefault();var f=$(this).closest(".modal");$(f).find(".content").css({display:"block",transition:"display .5s"});$(f).find(".content__sent").css({display:"none",transition:"display 1s"});return true});$(".fail button.close").on("click",function(g){g.preventDefault();var f=$(this).closest(".modal");$(f).find(".content").css({display:"block",transition:"display .5s"});$(f).find(".fail").css({display:"none",transition:"display 1s"});return true});$(".content button.close").on("click",function(g){g.preventDefault();var f=$(this).closest(".modal");$(f).find("label.user_phone").css({color:"#ffffff"});return true});$("input[name='user_phone']").keydown(function(){var g=$(this).closest(".modal");$(g).find("label.user_phone").css({color:"#ffffff"});var f=$(this).closest("form");$(f).find("label.user_phone").css({color:"transparent"})});$("input[name='user_email']").keydown(function(){var f=$(this).closest("form");$(f).find("label.user_email").css({color:"transparent"})});function d(f,i,h,g){if(f=="success"){$(h).find(".content").css({display:"none",transition:"display .5s"});$(h).find(".content__sent").css({display:"block",transition:"display 1s"});$(g).find("label.user_phone").css({color:"#ffffff"});$(g)[0].reset()}else{if(f=="bad_type"){$(h).find(".content").css({display:"none",transition:"display .5s"});$(h).find(".fail").css({display:"block",transition:"display 1s"});$(g).find("label.user_phone").css({color:"#ffffff"});$(g)[0].reset()}else{if(f=="bad_size"){$(h).find(".content").css({display:"none",transition:"display .5s"});$(h).find(".fail .modal-title").text("Превышен размер файла");$(h).find(".fail .modal-subtitle").text("Пожалуйста, выберите документ меньше 10 мегабайт");$(h).find(".fail").css({display:"block",transition:"display 1s"});$(g).find("label.user_phone").css({color:"#ffffff"});$(g)[0].reset()}else{$(h).find(".fail .modal-title").text("Не удалось отправить форму.");$(h).find(".fail .modal-subtitle").text("Попробуйте позже");$(h).find(".content").css({display:"none",transition:"display .5s"});$(h).find(".fail").css({display:"block",transition:"display 1s"});$(g).find("label.user_phone").css({color:"#ffffff"});$(g)[0].reset()}}}}function c(h,g,f){$(h).fadeTo("fast",0.15,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:"php/send.php",type:"POST",data:$(h).serialize()+f,success:function(i){var k=i.message;var j=i.type;d(j,k,g,h);$(h).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})},error:function(i){d("error",i.message,g,h)}})}function b(h,g,i){var j=$(".inputfile").prop("files")[0];var k=new FormData();k.append("file",j);if(a(h,"user_phone")){var f=$(h).find("input").val();k.append("options","three");k.append("user_phone",f);if(i){k.append("whatsapp","call")}if(e()){$(h).fadeTo("fast",0.15,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:"php/upload.php",cache:false,contentType:false,processData:false,data:k,type:"post",success:function(l){var n=l.message;var m=l.type;d(m,n,g,h);$(h).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})},error:function(l){d("error",messageText,g,h);$(h).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}})}else{$(g).find(".content").css({display:"none",transition:"display .5s"});$(g).find(".fail .modal-title").text("Пожалуйста, загрузите файл размером до 10 мб, формат: .doc, .docx, .rtf, .pdf или .jpeg, .jpg, .png");$(g).find(".fail").css({display:"block",transition:"display 1s"});$(h).find("label.user_phone").css({color:"#ffffff"});$(h)[0].reset()}}else{$(h).find("label.user_phone").css({color:"red",transition:"color .3s"})}}function a(g,f){var i="input[name="+f+"]";var h=g.find(i).val();return h}$(".optionsModal__call").on("click",function(h){h.preventDefault();var g=$(this).closest("form");var f=$(this).closest("#optionsModal");if(a(g,"user_phone")){var i="&options=three";c(g,f,i)}else{$(g).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".optionsModal__whatsapp").on("click",function(h){h.preventDefault();var g=$(this).closest("form");var f=$(this).closest("#optionsModal");if(a(g,"user_phone")){var i="&whatsapp=call&options=three";c(g,f,i)}else{$(g).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".mainModal__call").on("click",function(h){h.preventDefault();var g=$(this).closest("form");var f=$(this).closest("#mainModal");var i="";if(a(g,"user_phone")){c(g,f,i)}else{$(g).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".mainModal__whatsap").on("click",function(i){i.preventDefault();var h=$(this).closest("form");var g=$(this).closest("#mainModal");if(a(h,"user_phone")){var f="&whatsapp=call";c(h,g,f)}else{$(h).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".tzModal__call").on("click",function(h){h.preventDefault();var g=$(this).closest("form");var f=$(this).closest("#tzModal");var i="&options=tz";if(a(g,"user_phone")){c(g,f,i)}else{$(g).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".tzModal__whatsap").on("click",function(i){i.preventDefault();var h=$(this).closest("form");var g=$(this).closest("#tzModal");if(a(h,"user_phone")){var f="&whatsapp=call&options=tz";c(h,g,f)}else{$(h).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".pricelist-form__call").on("click",function(j){j.preventDefault();var i=$(this).closest("form");var g="php/send.php";var f=i.find("input[name='user_email']").val();var h=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(f&&h.test(f)){var k="&options=price";$(i).fadeTo("fast",0.15,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:"php/send.php",type:"POST",data:$(i).serialize()+k,success:function(l){var m=l.type;var n=l.message;$(i).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)});if(m=="success"){$(i).find("label.user_email").css({color:"transparent"});$(i)[0].reset();$("#successModal").modal("show");$(i).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}else{$("#successModal").find(".fail .modal-title").text("Возникла ошибка.");$("#successModal").find(".fail .modal-subtitle").text("Попробуйте позже");$("#successModal").find(".content").css({display:"none",transition:"display .5s"});$("#successModal").find(".fail").css({display:"block",transition:"display 1s"});$(i).find("label.user_email").css({color:"transparent"});$(i)[0].reset();$("#successModal").modal("show");$(i).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}},error:function(l){$(i).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)});$("#successModal").find(".fail .modal-title").text("Возникла ошибка.");$("#successModal").find(".fail .modal-subtitle").text("Попробуйте позже");$("#successModal").find(".content").css({display:"none",transition:"display .5s"});$("#successModal").find(".fail").css({display:"block",transition:"display 1s"});$(i).find("label.user_email").css({color:"transparent"});$(i)[0].reset();$("#successModal").modal("show")}})}else{$(i).find("label.user_email").css({color:"red",transition:"color .3s"})}return false});$(".contact-form__call").on("click",function(h){h.preventDefault();var g=$(this).closest("form");var f="php/send.php";if(a(g,"user_phone")){$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",true)});var i="&options=enginier";$.ajax({url:f,type:"POST",data:$(g).serialize()+i,success:function(j){var k=j.type;var l=j.message;if(k=="success"){$(g).find("label.user_phone").css({color:"transparent"});$(g)[0].reset();$("#successModal").modal("show")}else{$("#successModal").find(".fail .modal-title").text("Возникла ошибка.");$("#successModal").find(".fail .modal-subtitle").text("Попробуйте позже");$("#successModal").find(".success").css({display:"none",transition:"display .5s"});$("#successModal").find(".fail").css({display:"block",transition:"display 1s"});$(g).find("label.user_phone").css({color:"transparent"});$(g)[0].reset();$("#successModal").modal("show")}$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})},error:function(j){$("#successModal").find(".fail .modal-title").text("Возникла ошибка.");$("#successModal").find(".fail .modal-subtitle").text("Попробуйте позже");$("#successModal").find(".success").css({display:"none",transition:"display .5s"});$("#successModal").find(".fail").css({display:"block",transition:"display 1s"});$(g).find("label.user_phone").css({color:"transparent"});$(g)[0].reset();$("#successModal").modal("show");$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}})}else{$(g).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".contact-form__whatsapp").on("click",function(h){h.preventDefault();var g=$(this).closest("form");var f="php/send.php";if(a(g,"user_phone")){var i="&whatsapp=enginier";$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:f,type:"POST",data:$(g).serialize()+i,success:function(j){var k=j.type;var l=j.message;if(k=="success"){$(g).find("label.user_phone").css({color:"transparent"});$(g)[0].reset();$("#successModal").modal("show")}else{$("#successModal").find(".fail .modal-title").text("Возникла ошибка.");$("#successModal").find(".fail .modal-subtitle").text("Попробуйте позже");$("#successModal").find(".content").css({display:"none",transition:"display .5s"});$("#successModal").find(".fail").css({display:"block",transition:"display 1s"});$(g).find("label.user_phone").css({color:"transparent"});$(g)[0].reset();$("#successModal").modal("show")}$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})},error:function(j){$("#successModal").find(".fail .modal-title").text("Возникла ошибка.");$("#successModal").find(".fail .modal-subtitle").text("Попробуйте позже");$("#successModal").find(".content").css({display:"none",transition:"display .5s"});$("#successModal").find(".fail").css({display:"block",transition:"display 1s"});$(g).find("label.user_phone").css({color:"transparent"});$(g)[0].reset();$("#successModal").modal("show");$(g).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}})}else{$(g).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".uploadModal__call").on("click",function(h){h.preventDefault();var g=$(this).closest("form");var f=$(this).closest("#uploadModal");b(g,f,whatsapp=true);return false});$(".uploadModal__whatsapp").on("click",function(h){h.preventDefault();var g=$(this).closest("form");var f=$(this).closest("#uploadModal");b(g,f,whatsapp=true);return false});$(".calcModal__call").on("click",function(k){k.preventDefault();var f=$(this).closest("form");var m=$(this).closest("#calcModal");if(a(f,"user_phone")){var j=new FormData();var g=$(f).find("input").val();var n=$("#calc-form").find("input#input_square").val();var i=$("#calc-form").find("input#input_baget").val();var l=$("#calc-form").find("select#input_material").val();var h=$("#calc-form").find("input#input_time").val();var o="calc";j.append("user_phone",g);j.append("options",o);j.append("square",n);j.append("baget",i);j.append("material",l);j.append("time",h);$(f).fadeTo("fast",0.15,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:"php/send.php",cache:false,contentType:false,processData:false,data:j,type:"post",success:function(p){var r=p.message;var q=p.type;if(q=="success"){$(m).find(".content").css({display:"none",transition:"display .5s"});$(m).find(".content__sent").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset();$("#calc-form")[0].reset();$("#calc-form output.baget").val(30000);$("#calc-form output.square").val(0);$("#calc-form output").css("left","0")}else{$(m).find(".fail .modal-title").text("Не удалось отправить форму.");$(m).find(".fail .modal-subtitle").text("Попробуйте позже");$(m).find(".content").css({display:"none",transition:"display .5s"});$(m).find(".fail").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset()}$(f).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})},error:function(p){$(m).find(".fail .modal-title").text("Не удалось отправить форму.");$(m).find(".fail .modal-subtitle").text("Попробуйте позже");$(m).find(".content").css({display:"none",transition:"display .5s"});$(m).find(".fail").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset();$(f).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}})}else{$(f).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".calcModal__whatsapp").on("click",function(k){k.preventDefault();var f=$(this).closest("form");var m=$(this).closest("#calcModal");if(a(f,"user_phone")){var j=new FormData();var g=$(f).find("input").val();var n=$("#calc-form").find("input#input_square").val();var i=$("#calc-form").find("input#input_baget").val();var l=$("#calc-form").find("select#input_material").val();var h=$("#calc-form").find("input#input_time").val();var o="calc";j.append("user_phone",g);j.append("options",o);j.append("whatsapp","call");j.append("square",n);j.append("baget",i);j.append("material",l);j.append("time",h);$(f).fadeTo("fast",0.15,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:"php/send.php",cache:false,contentType:false,processData:false,data:j,type:"post",success:function(p){var r=p.message;var q=p.type;if(q=="success"){$(m).find(".content").css({display:"none",transition:"display .5s"});$(m).find(".content__sent").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset();$("#calc-form")[0].reset();$("#calc-form output.baget").val(30000);$("#calc-form output.square").val(0);$("#calc-form output").css("left","0")}else{$(m).find(".fail .modal-title").text("Не удалось отправить форму.");$(m).find(".fail .modal-subtitle").text("Попробуйте позже");$(m).find(".content").css({display:"none",transition:"display .5s"});$(m).find(".fail").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset()}$(f).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})},error:function(p){$(m).find(".fail .modal-title").text("Не удалось отправить форму.");$(m).find(".fail .modal-subtitle").text("Попробуйте позже");$(m).find(".content").css({display:"none",transition:"display .5s"});$(m).find(".fail").css({display:"block",transition:"display 1s"});$(f).find("label.user_phone").css({color:"#ffffff"});$(f)[0].reset();$(f).fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}})}else{$(f).find("label.user_phone").css({color:"red",transition:"color .3s"})}return false});$(".floors-features .nav-link").click(function(){var f="";switch(this.id){case"floors-oil-tab":f="oil";break;case"floors-farm-tab":f="farm";break;case"floors-food-tab":f="food";break;case"floors-chemistry-tab":f="chemistry";break;case"floors-drugs-tab":f="drugs";break;case"floors-logs-tab":f="logs";break;default:f="oil"}$(".floors").css({"background-image":"url(images/floors/floors-"+f+".png)"});$(".tab-pane.fade").css({transition:"opacity .3s"})})});